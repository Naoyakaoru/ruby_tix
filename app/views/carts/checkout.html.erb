<h1>結帳</h1>
<script src="https://js.braintreegateway.com/web/dropin/1.25.0/js/dropin.min.js"></script>

<table>
<thead>
  <tr>
    <td>活動票券名稱</td>
    <td>數量</td>
    <td>單價</td>
    <td>小計</td>
  </tr>
</thead>

<tbody>
  <% current_cart.items.each do |item| %>
    <tr>
      <td><%= item.ticket_type.title %></td>
      <td><%= item.quantity %></td>
      <td><%= item.ticket_type.price %></td>
      <td><%= item.price %></td>
    </tr>
  <% end %>
</tbody>
<tr>
  <td colspan="3">總計</td>
  <td><%= current_cart.total_price %></td>
</tr>
</table>

<%= form_for(@order) do |form| %>
<div>
<%= form.label:user_name %>
<%= form.text_field:user_name %>
</div>

<div>
<%= form.label:tel %>
<%= form.text_field:tel %>
</div>

<div>
<%= form.label:address %>
<%= form.text_field:address %>
</div>

<div id="dropin-container"></div>

<%= form.submit '確認付款'%>
<% end %>

<script type="text/javascript">
braintree.dropin.create({
  authorization: CLIENT_TOKEN_FROM_SERVER,
  container: '#dropin-container'
}).then((dropinInstance) => {
}).catch((error) => {});
</script>