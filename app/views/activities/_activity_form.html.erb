<%= form_for @activity do |f|%>



  <%# 票券種類 %>
  <table class="table" style="width: 37rem">

    <thead class="thead table-info">
      <tr>
        <th scope="col">票券名稱</th>
        <th scope="col">數量</th>
        <th scope="col">票價</th>
        <th scope="col"></th>
      </tr>
    </thead>

    <%# 新增票種 %>
    <tbody data-controller="ticket-types-form">
      <tr>
        <template data-ticket-types-form-target="form">
          <%= f.fields_for :ticket_types, TicketType.new, child_index: 'NEW_FORM' do |new_form|%>  
            <div class="ticketType-form" new-ticket_types ="<%= new_form.object.new_record? %>" >
              <%= new_form.text_field:title%>
              <%= new_form.number_field:quantity, placeholder: '數量', min: 0 %>
              <%= new_form.number_field:price, placeholder: '票價', min:0 %>

              <%= link_to '#' do %>
                <i class="fas fa-chevron-circle-down"></i>
              <% end %>            

              <%= link_to '#', data: { action: 'ticket-types-form#removeTicketType' } do %>
                <i class="far fa-trash-alt new-ticket-delete-btn"></i>
              <% end %>
              <%= new_form.hidden_field :_destroy %>

            </div>
          <% end %>
        </template>  
      </tr>

        <%# current form %>
      <%= f.fields_for :ticket_types do |form|%>  
        <tr class="ticketType-form" new-ticket_types ="<%= form.object.new_record? %>" >
          <td><%= form.text_field:title%></td>
          <td><%= form.number_field:quantity, placeholder: '數量', min: 0 %></td>
          <td><%= form.number_field:price, placeholder: '票價', min:0 %></td>
          <td>
            <%= link_to '#', class:"card-link", data:{toggle:"collapse"}, role:"button", aria:{expanded:"false"}, data:{target:"#e"}, aria:{controls:"collapseExample"} do %>
              <i class="fas fa-chevron-circle-down"></i>
            <% end %>

            <%= link_to '#', data: { action: 'ticket-types-form#removeTicketType' } do %>
              <i class="far fa-trash-alt new-ticket-delete-btn"></i>
            <% end %>        
          </td>



            



          <%= form.hidden_field :_destroy %>

        </tr>
      <% end %>
    </tbody>






      <%# ticket_types form end %>
      <%= render 'ticket_types_form' %>
  </table>

  <div data-action = "click->ticket-types-form#addTicketType" data-ticket-types-form-target="addBtn" >
    <%= link_to '#' do %>
      <i class="fas fa-plus-circle"></i>付費票
    <% end %>
  </div>

  <div>
    <%= link_to '#' do %>
      <i class="fas fa-plus-circle"></i>免費票          
    <% end %>
  </div>

<%= f.submit '送出' %>
<% end %>



<script>
  $('.collapse').collapse('toggle')
</script>